<% portfolio ||= nil %>
  <div class="-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8">
    <div class="inline-block min-w-full py-2 align-middle md:px-6 lg:px-8">
      <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
        <table class="min-w-full divide-y divide-gray-300">
          <thead class="bg-gray-50">
            <tr>
              <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6">#</th>
              <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Name</th>
              <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Ticker</th>
              <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Last</th>
              <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">High</th>
              <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Low</th>
              <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Change</th>
              <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Change %</th>
              <% if portfolio %>
                <th class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900"></th>
              <% end %>
            </tr>
          </thead>
          <div class="divide-y divide-gray-200 bg-white">
          <%# Display all the stock information if Portfolio has stocks, ELSE display string to notify user of empty portfolio L50-52 %>
           <% if stocks.any? %>
            <% stocks.each_with_index do |stock, index| %>

                <tr class="group hover:bg-indigo-500 text-white cursor-pointer" onclick="window.location='<%= stock_url(stock) %>'">
                  <td class="whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 group-hover:text-white"> <%= index + 1 %></td>
                  <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500 group-hover:text-white"><%= stock.name %></td>
                  <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500 group-hover:text-white"><%= stock.ticker %></td>
                  <%# Interpolate data from API to Last, High & Low Below %>
                  <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500 group-hover:text-white/50">$55.00</td>
                  <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500 group-hover:text-white/50">$62.00</td>
                  <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500 group-hover:text-white/50">$52.00</td>
                  <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500 group-hover:text-white/50">+ $3.00</td> <%# Last vs Last %>
                  <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500 group-hover:text-white/50">+1.02%</td> <%# Last vs Last as %%>
                  <%# Only Display Delete Option if Portfolio is present %>
                  <% if portfolio %>
                    <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500 table-cell">
                    <%= link_to portfolio_stock_path(
                                portfolio_id: portfolio.id,
                                stock_id: stock.id),
                                data: {turbo_method: :delete, turbo_confirm: "Are you sure to delete this stock?"},
                                class: 'btn btn-light btn-sm border text-right' do %>
                                <i class="fa-regular fa-trash-can"></i>
                                <% end %>
                    </td>
                  <% end %>
              </tr>
            <% end %>
            <% else %>
              <td class="whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 table-cell">
              Portfolio is currently empty
              </td>
              <% end %>
          </div>
        </table>
      </div>
    </div>
  </div>
